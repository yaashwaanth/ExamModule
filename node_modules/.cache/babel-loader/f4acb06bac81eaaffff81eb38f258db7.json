{"ast":null,"code":"var _jsxFileName = \"/Users/gyashwanthsharma/Desktop/web_dev/SSTC/frontend/src/ImagePrev/ImageUploadPreviewComponent.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst imageMimeType = /image\\/(png|jpg|jpeg)/i;\nvar canExport = null;\nexport default function ImageUploadPreviewComponent(props) {\n  _s();\n\n  const [file, setFile] = useState(null);\n  const [fileDataURL, setFileDataURL] = useState(null);\n\n  const changeHandler = e => {\n    const file = e.target.files[0];\n\n    if (!file.type.match(imageMimeType)) {\n      alert(\"Image mime type is not valid\");\n      return;\n    }\n\n    setFile(file);\n  };\n\n  useEffect(() => {\n    let fileReader,\n        isCancel = false;\n\n    if (file) {\n      fileReader = new FileReader();\n\n      fileReader.onload = e => {\n        const {\n          result\n        } = e.target;\n\n        if (result && !isCancel) {\n          setFileDataURL(result);\n          canExport = result;\n        }\n      };\n\n      fileReader.readAsDataURL(file);\n    }\n\n    return () => {\n      isCancel = true;\n\n      if (fileReader && fileReader.readyState === 1) {\n        fileReader.abort();\n      }\n    };\n  }, [file]);\n  console.log(canExport);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"image\",\n          children: \" Browse images  \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"image\",\n          accept: \".png, .jpg, .jpeg\",\n          onChange: changeHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          label: \"Upload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), fileDataURL ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"img-preview-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: fileDataURL,\n        width: \"150px\",\n        height: \"150px\",\n        alt: \"preview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true);\n}\n\n_s(ImageUploadPreviewComponent, \"jbvYy5u/9Pt2MtdXfo2oQaZL6wk=\");\n\n_c = ImageUploadPreviewComponent;\nexport { canExport };\n\nvar _c;\n\n$RefreshReg$(_c, \"ImageUploadPreviewComponent\");","map":{"version":3,"names":["React","useEffect","useState","imageMimeType","canExport","ImageUploadPreviewComponent","props","file","setFile","fileDataURL","setFileDataURL","changeHandler","e","target","files","type","match","alert","fileReader","isCancel","FileReader","onload","result","readAsDataURL","readyState","abort","console","log"],"sources":["/Users/gyashwanthsharma/Desktop/web_dev/SSTC/frontend/src/ImagePrev/ImageUploadPreviewComponent.jsx"],"sourcesContent":["\r\nimport React ,{ useEffect, useState } from 'react'\r\n\r\nconst imageMimeType  = /image\\/(png|jpg|jpeg)/i;\r\nvar canExport =null\r\nexport default function ImageUploadPreviewComponent( props) {\r\n  const [file, setFile] = useState(null);\r\n  const [fileDataURL, setFileDataURL] = useState(null);\r\n \r\n  const changeHandler = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file.type.match(imageMimeType)) {\r\n      alert(\"Image mime type is not valid\");\r\n      return;\r\n    }\r\n    setFile(file);\r\n  }\r\n  useEffect(() => {\r\n    let fileReader, isCancel = false;\r\n    if (file) {\r\n      fileReader = new FileReader();\r\n      fileReader.onload = (e) => {\r\n        const { result } = e.target;\r\n        if (result && !isCancel) {\r\n          setFileDataURL(result)\r\n          canExport=result\r\n        }\r\n      }\r\n      fileReader.readAsDataURL(file);\r\n    }\r\n    return () => {\r\n      isCancel = true;\r\n      if (fileReader && fileReader.readyState === 1) {\r\n        fileReader.abort();\r\n      }\r\n    }\r\n\r\n  }, [file]);\r\n\r\n \r\n  console.log(canExport)\r\n  return (\r\n    <>\r\n      <form>\r\n        <p>\r\n          <label htmlFor='image'> Browse images  </label>\r\n          <input\r\n            type=\"file\"\r\n            id='image'\r\n            accept='.png, .jpg, .jpeg'\r\n            onChange={changeHandler}\r\n          />\r\n        </p>\r\n        <p>\r\n          <input type=\"submit\" label=\"Upload\" />\r\n        </p>\r\n      </form>\r\n      {fileDataURL ?\r\n        <p className=\"img-preview-wrapper\">\r\n          {\r\n            <img src={fileDataURL} width=\"150px\" height=\"150px\" alt=\"preview\" />\r\n          }\r\n        </p> : null}\r\n    </>\r\n  );\r\n\r\n\r\n}\r\nexport { canExport }"],"mappings":";;;AACA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;;;AAEA,MAAMC,aAAa,GAAI,wBAAvB;AACA,IAAIC,SAAS,GAAE,IAAf;AACA,eAAe,SAASC,2BAAT,CAAsCC,KAAtC,EAA6C;EAAA;;EAC1D,MAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBN,QAAQ,CAAC,IAAD,CAAhC;EACA,MAAM,CAACO,WAAD,EAAcC,cAAd,IAAgCR,QAAQ,CAAC,IAAD,CAA9C;;EAEA,MAAMS,aAAa,GAAIC,CAAD,IAAO;IAC3B,MAAML,IAAI,GAAGK,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAb;;IACA,IAAI,CAACP,IAAI,CAACQ,IAAL,CAAUC,KAAV,CAAgBb,aAAhB,CAAL,EAAqC;MACnCc,KAAK,CAAC,8BAAD,CAAL;MACA;IACD;;IACDT,OAAO,CAACD,IAAD,CAAP;EACD,CAPD;;EAQAN,SAAS,CAAC,MAAM;IACd,IAAIiB,UAAJ;IAAA,IAAgBC,QAAQ,GAAG,KAA3B;;IACA,IAAIZ,IAAJ,EAAU;MACRW,UAAU,GAAG,IAAIE,UAAJ,EAAb;;MACAF,UAAU,CAACG,MAAX,GAAqBT,CAAD,IAAO;QACzB,MAAM;UAAEU;QAAF,IAAaV,CAAC,CAACC,MAArB;;QACA,IAAIS,MAAM,IAAI,CAACH,QAAf,EAAyB;UACvBT,cAAc,CAACY,MAAD,CAAd;UACAlB,SAAS,GAACkB,MAAV;QACD;MACF,CAND;;MAOAJ,UAAU,CAACK,aAAX,CAAyBhB,IAAzB;IACD;;IACD,OAAO,MAAM;MACXY,QAAQ,GAAG,IAAX;;MACA,IAAID,UAAU,IAAIA,UAAU,CAACM,UAAX,KAA0B,CAA5C,EAA+C;QAC7CN,UAAU,CAACO,KAAX;MACD;IACF,CALD;EAOD,CApBQ,EAoBN,CAAClB,IAAD,CApBM,CAAT;EAuBAmB,OAAO,CAACC,GAAR,CAAYvB,SAAZ;EACA,oBACE;IAAA,wBACE;MAAA,wBACE;QAAA,wBACE;UAAO,OAAO,EAAC,OAAf;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UACE,IAAI,EAAC,MADP;UAEE,EAAE,EAAC,OAFL;UAGE,MAAM,EAAC,mBAHT;UAIE,QAAQ,EAAEO;QAJZ;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAUE;QAAA,uBACE;UAAO,IAAI,EAAC,QAAZ;UAAqB,KAAK,EAAC;QAA3B;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QAVF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,EAeGF,WAAW,gBACV;MAAG,SAAS,EAAC,qBAAb;MAAA,uBAEI;QAAK,GAAG,EAAEA,WAAV;QAAuB,KAAK,EAAC,OAA7B;QAAqC,MAAM,EAAC,OAA5C;QAAoD,GAAG,EAAC;MAAxD;QAAA;QAAA;QAAA;MAAA;IAFJ;MAAA;MAAA;MAAA;IAAA,QADU,GAKH,IApBX;EAAA,gBADF;AA0BD;;GA9DuBJ,2B;;KAAAA,2B;AA+DxB,SAASD,SAAT"},"metadata":{},"sourceType":"module"}